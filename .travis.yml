language: cpp

matrix:
  include:
    - os: linux
      dist: xenial
    - os: osx

install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install qt ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew link --force qt ; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get -y install qt5-default ; fi

script:
  - qmake
  - make
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then macdeployqt MrWriter.app -dmg ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then curl --upload-file MrWriter.dmg https://transfer.sh/MrWriter.dmg ; fi
